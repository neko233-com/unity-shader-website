<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•°å­¦åŸºç¡€ - Unity URP 2022 LTS æ•™ç¨‹</title>
    <link rel="stylesheet" href="../css/styles.css">
</head>
<body>
    <div class="container">
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1>URP æ•™ç¨‹</h1>
            </div>
            <nav class="nav-menu" id="navMenu">
                <div class="nav-section">
                    <h3>ğŸ§® æ•°å­¦åŸºç¡€</h3>
                    <ul>
                        <li><a href="math-basics.html" class="active">æ•°å­¦åŸºç¡€</a></li>
                        <li><a href="mvp-matrix.html">MVP çŸ©é˜µ</a></li>
                    </ul>
                </div>
            </nav>
        </aside>

        <main class="main-content">
            <div class="function-page">
                <h1>Shader æ•°å­¦åŸºç¡€</h1>
                <p class="subtitle">å›¾å½¢å­¦ä¸­å¸¸ç”¨çš„æ•°å­¦æ¦‚å¿µå’Œå‡½æ•°</p>

                <div class="section">
                    <h2">ğŸ”¢ å‘é‡è¿ç®—</h2>
                    
                    <h3>ç‚¹ç§¯ (Dot Product)</h3>
                    <div class="term-card">
                        <div class="term-details">
                            <p><strong>å…¬å¼ï¼š</strong>AÂ·B = |A| Ã— |B| Ã— cos(Î¸)</p>
                            <p><strong>ç»“æœï¼š</strong>æ ‡é‡ï¼ˆæ•°å­—ï¼‰</p>
                            <p><strong>ç”¨é€”ï¼š</strong>æµ‹é‡ä¸¤å‘é‡çš„ç›¸ä¼¼åº¦ã€æŠ•å½±</p>
                            <pre class="shader-code">float d = dot(A, B);
// d > 0: å¤¹è§’ < 90Â°ï¼ˆåŒå‘ï¼‰
// d = 0: å¤¹è§’ = 90Â°ï¼ˆå‚ç›´ï¼‰
// d < 0: å¤¹è§’ > 90Â°ï¼ˆåå‘ï¼‰</pre>
                        </div>
                    </div>
                    
                    <h3>å‰ç§¯ (Cross Product)</h3>
                    <div class="term-card">
                        <div class="term-details">
                            <p><strong>å…¬å¼ï¼š</strong>AÃ—B = |A| Ã— |B| Ã— sin(Î¸) Ã— n</p>
                            <p><strong>ç»“æœï¼š</strong>å‘é‡ï¼ˆå‚ç›´äº A å’Œ Bï¼‰</p>
                            <p><strong>ç”¨é€”ï¼š</strong>è®¡ç®—æ³•çº¿ã€å‰¯åˆ‡çº¿</p>
                            <pre class="shader-code">float3 c = cross(A, B);
// c å‚ç›´äº A å’Œ B ç»„æˆçš„å¹³é¢</pre>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <h2">ğŸ“ å¸¸ç”¨æ•°å­¦å‡½æ•°</h2>
                    
                    <table class="comparison-table">
                        <thead>
                            <tr>
                                <th>å‡½æ•°</th>
                                <th>è¯´æ˜</th>
                                <th>ç¤ºä¾‹</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>saturate(x)</code></td>
                                <td>é™åˆ¶åˆ° [0, 1]</td>
                                <td>é¢œè‰²ã€ç™¾åˆ†æ¯”</td>
                            </tr>
                            <tr>
                                <td><code>clamp(x, a, b)</code></td>
                                <td>é™åˆ¶åˆ° [a, b]</td>
                                <td>ä»»æ„èŒƒå›´é™åˆ¶</td>
                            </tr>
                            <tr>
                                <td><code>lerp(a, b, t)</code></td>
                                <td>çº¿æ€§æ’å€¼</td>
                                <td>é¢œè‰²æ··åˆã€è¿‡æ¸¡</td>
                            </tr>
                            <tr>
                                <td><code>smoothstep(a, b, x)</code></td>
                                <td>å¹³æ»‘è¿‡æ¸¡</td>
                                <td>æŸ”å’Œè¾¹ç¼˜</td>
                            </tr>
                            <tr>
                                <td><code>step(edge, x)</code></td>
                                <td>é˜¶è·ƒå‡½æ•°</td>
                                <td>ç¡¬è¾¹ç¼˜</td>
                            </tr>
                            <tr>
                                <td><code>frac(x)</code></td>
                                <td>å–å°æ•°éƒ¨åˆ†</td>
                                <td>é‡å¤å›¾æ¡ˆ</td>
                            </tr>
                            <tr>
                                <td><code>normalize(v)</code></td>
                                <td>å½’ä¸€åŒ–</td>
                                <td>æ–¹å‘å‘é‡</td>
                            </tr>
                            <tr>
                                <td><code>reflect(I, N)</code></td>
                                <td>åå°„å‘é‡</td>
                                <td>é•œé¢åå°„</td>
                            </tr>
                            <tr>
                                <td><code>refract(I, N, eta)</code></td>
                                <td>æŠ˜å°„å‘é‡</td>
                                <td>ç»ç’ƒã€æ°´</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="section">
                    <h2">ğŸ’¡ lerp vs smoothstep</h2>
                    
                    <div class="comparison-box">
                        <div class="compare-item">
                            <h4>lerp</h4>
                            <pre class="shader-code">// çº¿æ€§æ’å€¼
result = a + (b - a) * t;
// t=0 â†’ a
// t=1 â†’ b</pre>
                            <p>çº¿æ€§å˜åŒ–ï¼Œå¯èƒ½æœ‰ç¡¬è¾¹ç¼˜</p>
                        </div>
                        <div class="compare-item">
                            <h4>smoothstep</h4>
                            <pre class="shader-code">// å¹³æ»‘æ’å€¼
t = t * t * (3 - 2 * t);
result = lerp(a, b, t);</pre>
                            <p>S æ›²çº¿å˜åŒ–ï¼Œè¾¹ç¼˜æŸ”å’Œ</p>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <h2">ğŸ”§ å®ç”¨æŠ€å·§</h2>
                    
                    <h3>é‡æ˜ å°„èŒƒå›´</h3>
                    <pre class="shader-code">// å°† x ä» [inMin, inMax] æ˜ å°„åˆ° [outMin, outMax]
float remap(float x, float inMin, float inMax, float outMin, float outMax)
{
    return outMin + (x - inMin) * (outMax - outMin) / (inMax - inMin);
}

// ç¤ºä¾‹: å°† [-1, 1] æ˜ å°„åˆ° [0, 1]
float result = remap(x, -1, 1, 0, 1);
// ç®€åŒ–: float result = x * 0.5 + 0.5;</pre>

                    <h3>æåæ ‡</h3>
                    <pre class="shader-code">// UV è½¬æåæ ‡
float2 centered = uv - 0.5;
float radius = length(centered);
float angle = atan2(centered.y, centered.x);

// æåæ ‡è½¬ UV
float2 uv = float2(cos(angle), sin(angle)) * radius + 0.5;</pre>
                </div>

                <div class="section">
                    <h2">âš ï¸ æ³¨æ„äº‹é¡¹</h2>
                    
                    <div class="warning-box">
                        <h4>é™¤é›¶é”™è¯¯</h4>
                        <p>é¿å…é™¤ä»¥é›¶ï¼Œå¯ä»¥åŠ ä¸€ä¸ªå°å€¼ï¼š</p>
                        <pre class="shader-code">float result = a / (b + 0.0001);</pre>
                    </div>
                    
                    <div class="warning-box">
                        <h4>NaN å’Œ Inf</h4>
                        <p><code>pow()</code> å¯¹è´Ÿæ•°å¯èƒ½äº§ç”Ÿ NaNï¼š</p>
                        <pre class="shader-code">float safe = pow(max(0, x), n);</pre>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="../js/sidebar.js"></script>
    <script src="../js/shader-highlight.js"></script>
    <script src="../js/app.js"></script>
</body>
</html>
