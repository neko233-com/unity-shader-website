<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æº¶è§£æ•ˆæœ - Unity URP 2022 LTS æ•™ç¨‹</title>
    <link rel="stylesheet" href="../css/styles.css">
</head>
<body>
    <div class="container">
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1>URP æ•™ç¨‹</h1>
            </div>
            <nav class="nav-menu" id="navMenu">
                <div class="nav-section">
                    <h3>âœ¨ ç‰¹æ•ˆç³»ç»Ÿ</h3>
                    <ul>
                        <li><a href="dissolve.html" class="active">æº¶è§£æ•ˆæœ</a></li>
                        <li><a href="fresnel.html">è²æ¶…å°”æ•ˆæœ</a></li>
                        <li><a href="rim-light.html">è¾¹ç¼˜å…‰</a></li>
                        <li><a href="distortion.html">æ‰­æ›²æ•ˆæœ</a></li>
                    </ul>
                </div>
            </nav>
        </aside>

        <main class="main-content">
            <div class="function-page">
                <h1>æº¶è§£æ•ˆæœ (Dissolve Effect)</h1>
                <p class="subtitle">ä½¿ç”¨å™ªå£°çº¹ç†å®ç°ç‰©ä½“æ¶ˆè</p>

                <div class="section">
                    <h2>ğŸ“š åŸç†</h2>
                    <p>æº¶è§£æ•ˆæœçš„æ ¸å¿ƒæ˜¯ä½¿ç”¨å™ªå£°çº¹ç†çš„ç°åº¦å€¼ä¸é˜ˆå€¼æ¯”è¾ƒï¼Œä½äºé˜ˆå€¼çš„åƒç´ è¢«è£å‰ªã€‚é€šè¿‡åŠ¨ç”»æ”¹å˜é˜ˆå€¼ï¼Œå®ç°é€æ¸æ¶ˆå¤±çš„æ•ˆæœã€‚</p>
                    
                    <div class="diagram-container">
                        <svg viewBox="0 0 500 150" class="dissolve-diagram">
                            <!-- åŸå›¾ -->
                            <rect x="20" y="30" width="100" height="100" fill="#4a9eff" rx="5"/>
                            <text x="70" y="150" text-anchor="middle" fill="#ccc" font-size="12">åŸå§‹ç‰©ä½“</text>
                            
                            <!-- + -->
                            <text x="150" y="85" fill="#fff" font-size="24">+</text>
                            
                            <!-- å™ªå£° -->
                            <rect x="180" y="30" width="100" height="100" fill="url(#noisePattern)" rx="5"/>
                            <text x="230" y="150" text-anchor="middle" fill="#ccc" font-size="12">å™ªå£°çº¹ç†</text>
                            
                            <!-- = -->
                            <text x="310" y="85" fill="#fff" font-size="24">=</text>
                            
                            <!-- ç»“æœ -->
                            <rect x="340" y="30" width="100" height="100" fill="#4a9eff" rx="5" style="mask: url(#dissolveMask)"/>
                            <text x="390" y="150" text-anchor="middle" fill="#ccc" font-size="12">æº¶è§£ç»“æœ</text>
                            
                            <defs>
                                <pattern id="noisePattern" width="10" height="10" patternUnits="userSpaceOnUse">
                                    <rect width="10" height="10" fill="#333"/>
                                    <rect width="5" height="5" fill="#666"/>
                                    <rect x="5" y="5" width="5" height="5" fill="#888"/>
                                </pattern>
                            </defs>
                        </svg>
                    </div>
                </div>

                <div class="section">
                    <h2>ğŸ’» ä»£ç å®ç°</h2>
                    
                    <h3>åŸºç¡€æº¶è§£ Shader</h3>
                    <pre class="shader-code">// Properties
_DissolveMap("Dissolve Map", 2D) = "white" {}
_DissolveThreshold("Dissolve Threshold", Range(0, 1)) = 0
_EdgeWidth("Edge Width", Range(0, 0.1)) = 0.05
_EdgeColor("Edge Color", Color) = (1, 0.5, 0, 1)

// Fragment Shader
half4 frag(Varyings input) : SV_Target
{
    // é‡‡æ ·æº¶è§£è´´å›¾
    float dissolveValue = SAMPLE_TEXTURE2D(_DissolveMap, sampler_DissolveMap, input.uv).r;
    
    // è£å‰ªä½äºé˜ˆå€¼çš„åƒç´ 
    clip(dissolveValue - _DissolveThreshold);
    
    // é‡‡æ ·åŸºç¡€é¢œè‰²
    half4 baseColor = SAMPLE_TEXTURE2D(_BaseMap, sampler_BaseMap, input.uv);
    
    // è¾¹ç¼˜å‘å…‰
    float edge = 1 - smoothstep(0, _EdgeWidth, dissolveValue - _DissolveThreshold);
    half3 finalColor = lerp(baseColor.rgb, _EdgeColor.rgb, edge);
    
    return half4(finalColor, baseColor.a);
}</pre>

                    <h3>å®Œæ•´ Shader æ–‡ä»¶ç»“æ„</h3>
                    <pre class="shader-code">Shader "Custom/Dissolve"
{
    Properties
    {
        _BaseMap("Base Map", 2D) = "white" {}
        _BaseColor("Base Color", Color) = (1, 1, 1, 1)
        _DissolveMap("Dissolve Map", 2D) = "white" {}
        _DissolveThreshold("Threshold", Range(0, 1)) = 0
        _EdgeWidth("Edge Width", Range(0, 0.2)) = 0.05
        _EdgeColor("Edge Color", Color) = (1, 0.5, 0, 1)
    }
    
    SubShader
    {
        Tags { "RenderType"="Opaque" "RenderPipeline"="UniversalPipeline" }
        
        Pass
        {
            HLSLPROGRAM
            #pragma vertex vert
            #pragma fragment frag
            
            #include "Packages/com.unity.render-pipelines.universal/ShaderLibrary/Core.hlsl"
            
            struct Attributes
            {
                float4 positionOS : POSITION;
                float2 uv : TEXCOORD0;
            };
            
            struct Varyings
            {
                float4 positionCS : SV_POSITION;
                float2 uv : TEXCOORD0;
            };
            
            TEXTURE2D(_BaseMap);
            SAMPLER(sampler_BaseMap);
            TEXTURE2D(_DissolveMap);
            SAMPLER(sampler_DissolveMap);
            
            CBUFFER_START(UnityPerMaterial)
                float4 _BaseMap_ST;
                half4 _BaseColor;
                float _DissolveThreshold;
                float _EdgeWidth;
                half4 _EdgeColor;
            CBUFFER_END
            
            Varyings vert(Attributes input)
            {
                Varyings output;
                output.positionCS = TransformObjectToHClip(input.positionOS.xyz);
                output.uv = TRANSFORM_TEX(input.uv, _BaseMap);
                return output;
            }
            
            half4 frag(Varyings input) : SV_Target
            {
                float dissolve = SAMPLE_TEXTURE2D(_DissolveMap, sampler_DissolveMap, input.uv).r;
                clip(dissolve - _DissolveThreshold);
                
                half4 baseColor = SAMPLE_TEXTURE2D(_BaseMap, sampler_BaseMap, input.uv) * _BaseColor;
                
                float edge = 1 - smoothstep(0, _EdgeWidth, dissolve - _DissolveThreshold);
                half3 finalColor = lerp(baseColor.rgb, _EdgeColor.rgb, edge);
                
                return half4(finalColor, 1);
            }
            ENDHLSL
        }
    }
}</pre>
                </div>

                <div class="section">
                    <h2>ğŸ® åº”ç”¨åœºæ™¯</h2>
                    
                    <div class="feature-grid">
                        <div class="feature-card">
                            <h3>ğŸ’€ è§’è‰²æ­»äº¡</h3>
                            <p>æ•Œäººè¢«å‡»è´¥åçš„æ¶ˆå¤±æ•ˆæœ</p>
                        </div>
                        
                        <div class="feature-card">
                            <h3>âœ¨ ä¼ é€é—¨</h3>
                            <p>ç‰©ä½“è¿›å…¥ä¼ é€é—¨æ—¶çš„æº¶è§£</p>
                        </div>
                        
                        <div class="feature-card">
                            <h3>ğŸ”¥ ç‡ƒçƒ§æ•ˆæœ</h3>
                            <p>é…åˆæ©™è‰²è¾¹ç¼˜æ¨¡æ‹Ÿç‡ƒçƒ§</p>
                        </div>
                        
                        <div class="feature-card">
                            <h3>âš¡ æ•°å­—åŒ–</h3>
                            <p>ç§‘å¹»é£æ ¼çš„åƒç´ åŒ–æ¶ˆå¤±</p>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <h2>ğŸ’¡ æŠ€å·§</h2>
                    
                    <div class="tip-box">
                        <h4>å¤šå±‚è¾¹ç¼˜</h4>
                        <pre class="shader-code">// åŒè‰²è¾¹ç¼˜
float edge1 = 1 - smoothstep(0, _EdgeWidth, dissolve - _DissolveThreshold);
float edge2 = 1 - smoothstep(0, _EdgeWidth * 2, dissolve - _DissolveThreshold);

half3 color = baseColor.rgb;
color = lerp(color, _EdgeColor2.rgb, edge2); // å¤–å±‚
color = lerp(color, _EdgeColor1.rgb, edge1); // å†…å±‚</pre>
                    </div>
                    
                    <div class="tip-box">
                        <h4>æ–¹å‘æ€§æº¶è§£</h4>
                        <pre class="shader-code">// ä»ä¸‹å¾€ä¸Šæº¶è§£
float dirDissolve = input.positionOS.y * 0.5 + 0.5; // å½’ä¸€åŒ–é«˜åº¦
float finalDissolve = dissolve * dirDissolve;
clip(finalDissolve - _DissolveThreshold);</pre>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="../js/sidebar.js"></script>
    <script src="../js/shader-highlight.js"></script>
    <script src="../js/app.js"></script>
</body>
</html>
