<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>çº¹ç†æ··åˆ - Unity URP 2022 LTS æ•™ç¨‹</title>
    <link rel="stylesheet" href="../css/styles.css">
</head>
<body>
    <div class="container">
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1">URP æ•™ç¨‹</h1>
            </div>
            <nav class="nav-menu" id="navMenu">
                <div class="nav-section">
                    <h3">ğŸ–¼ï¸ çº¹ç†</h3>
                    <ul>
                        <li><a href="texture-sampling.html">çº¹ç†é‡‡æ ·</a></li>
                        <li><a href="mipmap.html">Mipmap</a></li>
                        <li><a href="texture-addressing.html">çº¹ç†å¯»å€</a></li>
                        <li><a href="texture-blend.html" class="active">çº¹ç†æ··åˆ</a></li>
                    </ul>
                </div>
            </nav>
        </aside>

        <main class="main-content">
            <div class="function-page">
                <h1">çº¹ç†æ··åˆ</h1>
                <p class="subtitle">å¤šå±‚çº¹ç†å åŠ æŠ€æœ¯</p>

                <div class="section">
                    <h2">ğŸ“š åŸºç¡€æ··åˆ</h2>
                    
                    <h3">lerp çº¿æ€§æ’å€¼</h3>
                    <pre class="shader-code">// lerp(a, b, t) = a + (b - a) * t
half4 color1 = SAMPLE_TEXTURE2D(_Tex1, sampler_Tex1, uv);
half4 color2 = SAMPLE_TEXTURE2D(_Tex2, sampler_Tex2, uv);

// t = 0 æ—¶è¿”å› color1ï¼Œt = 1 æ—¶è¿”å› color2
half4 blended = lerp(color1, color2, _BlendFactor);</pre>
                </div>

                <div class="section">
                    <h2">ğŸ—ºï¸ åŸºäºé®ç½©æ··åˆ</h2>
                    
                    <pre class="shader-code">// ä½¿ç”¨é®ç½©çº¹ç†æ§åˆ¶æ··åˆ
half mask = SAMPLE_TEXTURE2D(_MaskTex, sampler_MaskTex, uv).r;
half4 blended = lerp(color1, color2, mask);</pre>
                    
                    <svg width="500" height="120" viewBox="0 0 500 120">
                        <rect x="10" y="20" width="80" height="80" fill="#4a90d9" rx="5"/>
                        <text x="50" y="115" text-anchor="middle" font-size="11">çº¹ç† A</text>
                        
                        <text x="120" y="65" text-anchor="middle" font-size="20">+</text>
                        
                        <rect x="150" y="20" width="80" height="80" fill="#d94a4a" rx="5"/>
                        <text x="190" y="115" text-anchor="middle" font-size="11">çº¹ç† B</text>
                        
                        <text x="260" y="65" text-anchor="middle" font-size="20">Ã—</text>
                        
                        <defs>
                            <linearGradient id="maskGrad" x1="0%" y1="0%" x2="100%" y2="0%">
                                <stop offset="0%" style="stop-color:#000"/>
                                <stop offset="100%" style="stop-color:#fff"/>
                            </linearGradient>
                        </defs>
                        <rect x="290" y="20" width="80" height="80" fill="url(#maskGrad)" rx="5"/>
                        <text x="330" y="115" text-anchor="middle" font-size="11">é®ç½©</text>
                        
                        <text x="400" y="65" text-anchor="middle" font-size="20">=</text>
                        
                        <defs>
                            <linearGradient id="resultGrad" x1="0%" y1="0%" x2="100%" y2="0%">
                                <stop offset="0%" style="stop-color:#4a90d9"/>
                                <stop offset="100%" style="stop-color:#d94a4a"/>
                            </linearGradient>
                        </defs>
                        <rect x="420" y="20" width="80" height="80" fill="url(#resultGrad)" rx="5"/>
                        <text x="460" y="115" text-anchor="middle" font-size="11">ç»“æœ</text>
                    </svg>
                </div>

                <div class="section">
                    <h2">ğŸ”ï¸ åœ°å½¢å¤šå±‚æ··åˆ</h2>
                    
                    <pre class="shader-code">// 4 å±‚åœ°å½¢çº¹ç†ï¼ˆè‰ã€æ³¥åœŸã€å²©çŸ³ã€é›ªï¼‰
half4 grass = SAMPLE_TEXTURE2D(_GrassTex, sampler_GrassTex, uv * _GrassTiling);
half4 dirt = SAMPLE_TEXTURE2D(_DirtTex, sampler_DirtTex, uv * _DirtTiling);
half4 rock = SAMPLE_TEXTURE2D(_RockTex, sampler_RockTex, uv * _RockTiling);
half4 snow = SAMPLE_TEXTURE2D(_SnowTex, sampler_SnowTex, uv * _SnowTiling);

// Splat Map (RGBA = 4 å±‚æƒé‡)
half4 splat = SAMPLE_TEXTURE2D(_SplatMap, sampler_SplatMap, uv);

// åŠ æƒæ··åˆ
half4 blended = grass * splat.r + dirt * splat.g + rock * splat.b + snow * splat.a;</pre>
                </div>

                <div class="section">
                    <h2">ğŸ“ åŸºäºé«˜åº¦æ··åˆ</h2>
                    
                    <pre class="shader-code">// é«˜åº¦æ··åˆ - æ›´è‡ªç„¶çš„è¿‡æ¸¡
float HeightBlend(float h1, float h2, float blend, float contrast)
{
    float height = h1 * (1 - blend) + h2 * blend;
    float ma = max(h1 + (1 - blend), h2 + blend) - contrast;
    float b1 = max(h1 + (1 - blend) - ma, 0);
    float b2 = max(h2 + blend - ma, 0);
    return b2 / (b1 + b2);
}

// ä½¿ç”¨
half h1 = tex1.a;  // çº¹ç† A çš„é«˜åº¦å­˜åœ¨ Alpha é€šé“
half h2 = tex2.a;  // çº¹ç† B çš„é«˜åº¦
half t = HeightBlend(h1, h2, _BlendFactor, _Contrast);
half4 blended = lerp(color1, color2, t);</pre>
                </div>

                <div class="section">
                    <h2">ğŸ¨ æ··åˆæ¨¡å¼</h2>
                    
                    <pre class="shader-code">// å åŠ  (Overlay)
half3 Overlay(half3 base, half3 blend)
{
    return lerp(
        2.0 * base * blend,
        1.0 - 2.0 * (1.0 - base) * (1.0 - blend),
        step(0.5, base)
    );
}

// æŸ”å…‰ (Soft Light)
half3 SoftLight(half3 base, half3 blend)
{
    return lerp(
        2.0 * base * blend + base * base * (1.0 - 2.0 * blend),
        sqrt(base) * (2.0 * blend - 1.0) + 2.0 * base * (1.0 - blend),
        step(0.5, blend)
    );
}

// æ­£ç‰‡å åº• (Multiply)
half3 Multiply(half3 base, half3 blend)
{
    return base * blend;
}

// æ»¤è‰² (Screen)
half3 Screen(half3 base, half3 blend)
{
    return 1.0 - (1.0 - base) * (1.0 - blend);
}</pre>
                </div>

                <div class="section">
                    <h2">ğŸ’¡ æ€§èƒ½æç¤º</h2>
                    
                    <div class="tip-box">
                        <h4">å‡å°‘é‡‡æ ·æ¬¡æ•°</h4>
                        <p>æ¯å¢åŠ ä¸€å±‚çº¹ç†å°±å¢åŠ ä¸€æ¬¡é‡‡æ ·ã€‚å¯¹äºç§»åŠ¨ç«¯ï¼Œå»ºè®®æœ€å¤š 3-4 å±‚ã€‚å¯ä»¥å°†å¤šä¸ªå±æ€§æ‰“åŒ…åˆ°å•å¼ çº¹ç†çš„ä¸åŒé€šé“ã€‚</p>
                    </div>
                </div>

                <div class="nav-links">
                    <a href="texture-addressing.html">â† çº¹ç†å¯»å€</a>
                    <a href="lambert.html">Lambert å…‰ç…§ â†’</a>
                </div>
            </div>
        </main>
    </div>

    <script src="../js/sidebar.js"></script>
    <script src="../js/shader-highlight.js"></script>
    <script src="../js/app.js"></script>
</body>
</html>
