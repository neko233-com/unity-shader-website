<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shader å°æŠ€å·§ - Unity URP 2022 LTS æ•™ç¨‹</title>
    <link rel="stylesheet" href="../css/styles.css">
</head>
<body>
    <div class="container">
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1>URP æ•™ç¨‹</h1>
            </div>
            <nav class="nav-menu" id="navMenu">
                <div class="nav-section">
                    <h3">ğŸ“ å®è·µ</h3>
                    <ul>
                        <li><a href="shader-template.html">Shader æ¨¡æ¿</a></li>
                        <li><a href="shader-magic.html" class="active">Shader å°æŠ€å·§</a></li>
                    </ul>
                </div>
            </nav>
        </aside>

        <main class="main-content">
            <div class="function-page">
                <h1">Shader å°æŠ€å·§</h1>
                <p class="subtitle">å®ç”¨çš„ Shader ä»£ç ç‰‡æ®µé›†åˆ</p>

                <div class="section">
                    <h2">ğŸ¨ é¢œè‰²æŠ€å·§</h2>
                    
                    <h3">RGB è½¬ç°åº¦</h3>
                    <pre class="shader-code">// æ ‡å‡†äº®åº¦æƒé‡
half gray = dot(color.rgb, half3(0.299, 0.587, 0.114));

// ç®€å•å¹³å‡
half gray = (color.r + color.g + color.b) / 3.0;</pre>

                    <h3">è‰²è°ƒåˆ†ç¦» (Posterize)</h3>
                    <pre class="shader-code">float levels = 4.0;
color.rgb = floor(color.rgb * levels) / levels;</pre>

                    <h3">åè‰²</h3>
                    <pre class="shader-code">color.rgb = 1.0 - color.rgb;</pre>

                    <h3">è°ƒæ•´å¯¹æ¯”åº¦</h3>
                    <pre class="shader-code">float contrast = 1.5;
color.rgb = (color.rgb - 0.5) * contrast + 0.5;</pre>
                </div>

                <div class="section">
                    <h2">ğŸ“ UV æŠ€å·§</h2>
                    
                    <h3">æåæ ‡</h3>
                    <pre class="shader-code">float2 center = float2(0.5, 0.5);
float2 delta = uv - center;
float radius = length(delta);
float angle = atan2(delta.y, delta.x);

// æåæ ‡ UV
float2 polarUV = float2(radius, angle / 3.14159 * 0.5 + 0.5);</pre>

                    <h3">æ£‹ç›˜æ ¼</h3>
                    <pre class="shader-code">float2 checker = floor(uv * _TileCount);
float pattern = fmod(checker.x + checker.y, 2.0);</pre>

                    <h3">åœ†å½¢é®ç½©</h3>
                    <pre class="shader-code">float dist = distance(uv, float2(0.5, 0.5));
float circle = 1.0 - smoothstep(_Radius - _Edge, _Radius + _Edge, dist);</pre>

                    <h3">åƒç´ åŒ–</h3>
                    <pre class="shader-code">float2 pixelUV = floor(uv * _PixelCount) / _PixelCount;</pre>
                </div>

                <div class="section">
                    <h2">âœ¨ æ•ˆæœæŠ€å·§</h2>
                    
                    <h3">é—ªçƒæ•ˆæœ</h3>
                    <pre class="shader-code">float blink = sin(_Time.y * _Speed) * 0.5 + 0.5;
color.rgb += _BlinkColor.rgb * blink;</pre>

                    <h3">æè¾¹ï¼ˆåŸºäºæ·±åº¦ï¼‰</h3>
                    <pre class="shader-code">// é‡‡æ ·å‘¨å›´æ·±åº¦
float d0 = SampleSceneDepth(uv);
float d1 = SampleSceneDepth(uv + float2(_Offset, 0));
float d2 = SampleSceneDepth(uv + float2(0, _Offset));

// æ·±åº¦å·®å¼‚ = è¾¹ç¼˜
float edge = abs(d0 - d1) + abs(d0 - d2);
edge = step(_Threshold, edge);</pre>

                    <h3">æ‰«æçº¿</h3>
                    <pre class="shader-code">float scanline = sin(uv.y * _LineCount + _Time.y * _Speed);
scanline = smoothstep(0.0, 0.5, scanline);
color.rgb *= 0.8 + scanline * 0.2;</pre>

                    <h3">å™ªå£°</h3>
                    <pre class="shader-code">// ç®€å•ä¼ªéšæœº
float rand(float2 co)
{
    return frac(sin(dot(co, float2(12.9898, 78.233))) * 43758.5453);
}

// ä½¿ç”¨
float noise = rand(uv + _Time.y);</pre>
                </div>

                <div class="section">
                    <h2">ğŸ”§ æ•°å­¦æŠ€å·§</h2>
                    
                    <h3">å®‰å…¨å½’ä¸€åŒ–</h3>
                    <pre class="shader-code">float3 safeNormalize(float3 v)
{
    float len = length(v);
    return len > 0.0001 ? v / len : float3(0, 0, 1);
}</pre>

                    <h3">é‡æ˜ å°„</h3>
                    <pre class="shader-code">float remap(float value, float inMin, float inMax, float outMin, float outMax)
{
    return outMin + (value - inMin) * (outMax - outMin) / (inMax - inMin);
}</pre>

                    <h3">å¹³æ»‘æœ€å°å€¼</h3>
                    <pre class="shader-code">// ç”¨äºæ··åˆ SDF
float smoothMin(float a, float b, float k)
{
    float h = saturate(0.5 + 0.5 * (b - a) / k);
    return lerp(b, a, h) - k * h * (1.0 - h);
}</pre>
                </div>

                <div class="section">
                    <h2">ğŸ“± ç§»åŠ¨ç«¯ä¼˜åŒ–</h2>
                    
                    <pre class="shader-code">// ç”¨ mad ä»£æ›¿ä¹˜åŠ ï¼ˆéƒ¨åˆ† GPU æ›´å¿«ï¼‰
// result = a * b + c
result = mad(a, b, c);

// é¿å… powï¼Œç”¨ä¹˜æ³•è¿‘ä¼¼
// pow(x, 2) = x * x
// pow(x, 4) = x * x * x * x  æˆ–  (x * x) * (x * x)

// é¿å… normalizeï¼Œé¢„è®¡ç®—æˆ–ä½¿ç”¨å·²å½’ä¸€åŒ–çš„å€¼

// ä½¿ç”¨ half è€Œé float
half3 color = half3(1, 0, 0);</pre>
                </div>
            </div>
        </main>
    </div>

    <script src="../js/sidebar.js"></script>
    <script src="../js/shader-highlight.js"></script>
    <script src="../js/app.js"></script>
</body>
</html>
